(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1024:(e,r,s)=>{"use strict";s.d(r,{GameStateProvider:()=>g,EX:()=>m,BG:()=>u,vU:()=>x});var t=s(5155),a=s(2115);function n(e){var r;let s={...u};return(null==e?void 0:e.state)&&"object"==typeof(r=e.state)&&null!==r&&(s=function e(r,s){let t={...r};for(let a in s)if(s.hasOwnProperty(a)){let n=r[a],l=s[a];"object"!=typeof n||null===n||"object"!=typeof l||null===l||Array.isArray(n)||Array.isArray(l)?void 0!==l&&(t[a]=l):t[a]=e(n,l)}return t}(u,e.state)),(null==e?void 0:e.version)==="1.1"&&(s={...s,employees:{...s.employees,interns:{...s.employees.interns,cost:1},scientists:{...s.employees.scientists,cost:10}}}),(null==e?void 0:e.version)&&"1.1"!==e.version&&"1.2"!==e.version||(s={...s,employees:{...s.employees,accountant:s.employees.accountant||{owned:0,cost:10,researchSellRate:.1}},settings:{...s.settings,sellResearch:s.settings.sellResearch||!1}}),s}let l=e=>{try{let r={state:e,timestamp:Date.now(),version:"1.3"};return localStorage.setItem("universeExplorerSave",JSON.stringify(r)),!0}catch(e){return console.error("Failed to save game:",e),!1}},o=()=>{try{let e=localStorage.getItem("universeExplorerSave");if(!e)return null;let r=JSON.parse(e);return n(r)}catch(e){return console.error("Failed to load game:",e),null}},c=()=>(localStorage.removeItem("universeExplorerSave"),u),i=e=>JSON.stringify({state:e,timestamp:Date.now(),version:"1.3"},null,2),d=e=>{try{let r=JSON.parse(e);return n(r)}catch(e){return console.error("Failed to import save:",e),null}},u={research:{owned:0,perClick:1,perSec:0,totalGenerated:0},cash:{owned:0,perClick:1,perSec:0,cost:10},petrol:{owned:0,perSec:0,cost:10},energy:{current:100,max:100,regenRate:1},buildings:{pumpJack:{owned:0,cost:1e3,power:.25,generates:"oil"},refinery:{owned:0,cost:1e3,power:.5,generates:"petrol"},energyStations:{owned:0,cost:500,generates:"energy"},commonOreMine:{owned:0,cost:1e3,generates:"commonOre",power:.25},commonOreRefinery:{owned:0,cost:1e3,generates:"commonIngot",power:.25}},employees:{interns:{owned:0,cost:1,researchRate:.1},scientists:{owned:0,cost:10,researchRate:1},accountant:{owned:0,cost:10,researchSellRate:.1}},exploration:{localAreas:0,satellites:0,probes:0,discoveries:[]},resources:{commonOre:0,commonIngot:0,metals:0,chemicals:0,electronics:0,oil:0},market:{mineralPrice:10,metalPrice:25,chemicalPrice:15,electronicsPrice:50,lastUpdate:0},upgrades:{purchased:[],internEfficiency:1},prestige:{knowledge:0,upgrades:[],totalKnowledge:0,knowledgeInRun:0},stats:{playTime:0,researchClicks:0,lastSave:null},settings:{tickerSpeed:30,animations:!0,notifications:!0,soundEffects:!1,sellResearch:!1}},m={research:[{id:"efficient_interns",name:"Efficient Interns",description:"Interns generate +50% more research",cost:1500,effect:e=>({research:{...e.research},upgrades:{...e.upgrades,internEfficiency:1.5}})},{id:"lab_tools",name:"Lab tools",description:"Tools generate +50% more research",cost:1500,effect:e=>({research:{...e.research,perClick:e.research.perClick+.1},upgrades:{...e.upgrades,internEfficiency:e.upgrades.internEfficiency+.1}})}]},h=(0,a.createContext)(null);function g(e){let{children:r}=e,[s,n]=(0,a.useState)(()=>o()||u);return(0,a.useEffect)(()=>{let e=setInterval(()=>{n(e=>{var r,s,t,a,n,o,c,i,d;let u=e.employees.interns.owned*e.employees.interns.researchRate*e.upgrades.internEfficiency,m=e.employees.scientists.owned*e.employees.scientists.researchRate,h=((null===(r=e.buildings.pumpJack)||void 0===r?void 0:r.owned)||0)*((null===(s=e.buildings.pumpJack)||void 0===s?void 0:s.power)||.25),g=((null===(t=e.buildings.refinery)||void 0===t?void 0:t.owned)||0)*((null===(a=e.buildings.refinery)||void 0===a?void 0:a.power)||.5),x=(null===(n=e.buildings.energyStations)||void 0===n?void 0:n.owned)||0,p=((null===(o=e.buildings.commonOreMine)||void 0===o?void 0:o.owned)||0)*((null===(c=e.buildings.commonOreMine)||void 0===c?void 0:c.power)||.25),b=((null===(i=e.buildings.commonOreRefinery)||void 0===i?void 0:i.owned)||0)*((null===(d=e.buildings.commonOreRefinery)||void 0===d?void 0:d.power)||.25),f=0,v=0;e.settings.sellResearch&&(v=Math.min(e.employees.accountant.owned,e.research.owned),f=.1*e.employees.accountant.owned);let w={...e,research:{...e.research,owned:e.research.owned+u+m-v,perSec:u+m-v,totalGenerated:e.research.totalGenerated+u+m},cash:{...e.cash,owned:e.cash.owned+f,perSec:f},petrol:{...e.petrol,owned:(e.petrol.owned||0)+g,perSec:g},resources:{...e.resources,oil:(e.resources.oil||0)+h,chemicals:e.resources.chemicals||0,commonOre:(e.resources.commonOre||0)+p,commonIngot:(e.resources.commonIngot||0)+b},energy:{current:Math.min(e.energy.max||100,(e.energy.current||0)+x+(e.energy.regenRate||1)),max:e.energy.max||100,regenRate:e.energy.regenRate||1},stats:{...e.stats,playTime:(e.stats.playTime||0)+1,lastSave:new Date().toISOString()}};return(e.stats.playTime||0)%10==0&&l(w),w})},1e3);return()=>clearInterval(e)},[]),(0,a.useEffect)(()=>{let e=setInterval(()=>{n(e=>({...e,tickerUpdate:Date.now()}))},1e3);return()=>clearInterval(e)},[]),(0,a.useEffect)(()=>{let e=()=>{"hidden"===document.visibilityState&&l(s)},r=()=>{l(s)};return document.addEventListener("visibilitychange",e),window.addEventListener("pagehide",r),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("pagehide",r)}},[s]),(0,a.useEffect)(()=>{let e=setInterval(()=>{l(s)},3e4);return()=>clearInterval(e)},[s]),(0,a.useEffect)(()=>{let e=()=>{l(s)};return window.addEventListener("beforeunload",e),window.addEventListener("unload",()=>l(s)),()=>{window.removeEventListener("beforeunload",e),window.removeEventListener("unload",()=>l(s))}},[s]),(0,t.jsx)(h.Provider,{value:{state:s,setState:n,saveGame:()=>l(s),loadGame:()=>{let e=o();return e&&n(e),e},resetGame:()=>n(c()),exportSave:()=>i(s),importSave:e=>{let r=d(e);return r&&n(r),r}},children:(0,t.jsx)("div",{className:"GameStateProvider min-h-full",children:r})})}function x(){let e=(0,a.useContext)(h);if(!e)throw Error("useGameState must be used within a GameStateProvider");return e}},4289:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>b});var t=s(5155),a=s(1024);function n(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if(isNaN(e))return"0";let s=Math.abs(e);if(s>0&&s<1)return e.toLocaleString(r,{minimumFractionDigits:2,maximumFractionDigits:2});for(let t of[{threshold:1e12,suffix:"T",decimals:2},{threshold:1e9,suffix:"B",decimals:2},{threshold:1e6,suffix:"M",decimals:2},{threshold:1e4,suffix:"K",decimals:2},{threshold:1e3,suffix:"K",decimals:1}])if(s>=t.threshold)return(e/t.threshold).toLocaleString(r,{minimumFractionDigits:t.decimals,maximumFractionDigits:t.decimals})+t.suffix;return e.toLocaleString(r,{minimumFractionDigits:2*(e%1!=0),maximumFractionDigits:2*(e%1!=0)})}var l=s(2115);function o(){let{state:e,setState:r}=(0,a.vU)(),[s,o]=(0,l.useState)(!1);(0,l.useEffect)(()=>{o(!0)},[]);let c=!!s&&e.research.owned>=e.cash.cost;return(0,t.jsx)("div",{className:"bg-dark-default rounded-xl p-6 shadow-lg border border-slate-700",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xl font-bold text-secondary-light",children:"Research Exchange"}),(0,t.jsxs)("div",{className:"text-sm text-slate-400 mt-1",children:["Rate: ",s?n(e.cash.cost):"0"," RP → $1"]})]}),(0,t.jsxs)("div",{className:"text-lg font-medium text-primary-light",children:["Current Cash: $",s?n(e.cash.owned):"0"]}),(0,t.jsxs)("button",{onClick:()=>{c&&r(e=>({...e,research:{...e.research,owned:e.research.owned-e.cash.cost},cash:{...e.cash,owned:e.cash.owned+1}}))},disabled:!c,id:"button-outline",className:"\n                        relative overflow-hidden \n                        font-bold py-3 px-8 rounded-full \n                        transition-colors duration-75\n                        focus:outline-none focus:ring-2 focus:ring-secondary-light\n                        ".concat(c?"bg-secondary-dark active:bg-secondary-default text-white":"bg-gray-700 text-gray-400 cursor-not-allowed","\n                    "),children:[(0,t.jsx)("span",{className:"relative z-10 flex items-center gap-2 will-change-transform",children:s?c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-5 h-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),"Convert"]}):"Need ".concat(n(e.cash.cost-e.research.owned)," More RP"):"Loading..."}),c&&(0,t.jsx)("span",{className:"absolute inset-0 bg-white opacity-0 active:opacity-10 transition-opacity duration-75 rounded-full"})]})]})})}function c(){let{state:e,setState:r}=(0,a.vU)(),[s,o]=(0,l.useState)(!1);(0,l.useEffect)(()=>{o(!0)},[]);let c=(0,l.useCallback)(()=>{r(e=>({...e,research:{...e.research,owned:e.research.owned+e.research.perClick,totalGenerated:e.research.totalGenerated+e.research.perClick},stats:{...e.stats,researchClicks:e.stats.researchClicks+e.research.perClick}}))},[r]);return(0,t.jsx)("div",{className:"bg-dark-default rounded-xl p-6 shadow-lg border border-slate-700",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-primary-light",children:[s?n(e.research.owned):0," Research"]}),(0,t.jsx)("button",{onClick:c,className:" overflow-hidden bg-primary-dark text-white font-bold py-3 px-8 rounded-full active:bg-primary-default",id:"button-outline",children:(0,t.jsxs)("span",{className:"relative z-10 flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),"Gather Research (+",s?n(e.research.perClick):0,")"]})}),(0,t.jsxs)("div",{className:"text-accent-DEFAULT font-mono text-sm",children:[s?n(e.research.perSec):0," R/s"]})]})})}function i(){let{state:e,setState:r}=(0,a.vU)(),s=()=>Math.floor(e.research.totalGenerated/1e6),n=s()>=1,l=()=>e.research.totalGenerated%1e6/1e6;return(0,t.jsxs)("div",{className:"bg-dark-default rounded-xl p-6 shadow-lg border border-slate-700",children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Prestige"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Current Knowledge"}),(0,t.jsx)("p",{className:"text-xl",children:e.prestige.knowledge})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Total Knowledge"}),(0,t.jsx)("p",{className:"text-xl",children:e.prestige.totalKnowledge})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Knowledge from Prestige"}),(0,t.jsx)("p",{className:"text-xl",children:s()}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"(1,000,000 research = 1 Knowledge)"})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Progress to Next Knowledge"}),(0,t.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2.5 mt-2",children:(0,t.jsx)("div",{className:"bg-purple-600 h-2.5 rounded-full",style:{width:"".concat(100*l(),"%")}})}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[Math.floor(e.research.totalGenerated%1e6)," / 1,000,000 (",Math.floor(100*l()),"%)"]})]}),(0,t.jsx)("button",{onClick:()=>{if(!n)return;let e=s();r(r=>({...r,research:{owned:0,perClick:1,perSec:0,totalGenerated:0},prestige:{...r.prestige,knowledge:r.prestige.knowledge+e,knowledgeInRun:0,totalKnowledge:r.prestige.totalKnowledge+e}}))},disabled:!n,className:"mt-4 w-full px-4 py-3 rounded-lg transition-all ".concat(n?"bg-purple-600 hover:bg-purple-700 hover:shadow-purple-500/30 shadow-lg":"bg-gray-700 cursor-not-allowed opacity-50"," text-white font-bold"),children:n?"Reset Universe (+".concat(s()," Knowledge)"):"Need ".concat((1e6-e.research.totalGenerated%1e6).toLocaleString()," more research for next Knowledge")})]})}function d(){let{state:e,setState:r}=(0,a.vU)(),s=(s,t)=>{let n=Object.values(a.EX).flat().find(e=>e.id===s);n&&e.research.owned>=t&&!e.upgrades.purchased.includes(s)&&r(e=>{let r=n.effect(e);return{...e,...r,research:{...e.research,...r.research,owned:e.research.owned-t},upgrades:{...e.upgrades,...r.upgrades,purchased:[...e.upgrades.purchased,s]}}})};return(0,t.jsx)("div",{className:"space-y-6",children:Object.entries(a.EX).map(r=>{let[a,l]=r;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-primary-light mb-3 capitalize",children:[a," Upgrades"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map(r=>{let a=e.upgrades.purchased.includes(r.id),l=e.research.owned>=r.cost,o=r.cost-e.research.owned;return(0,t.jsxs)("div",{className:"p-4 rounded-lg border ".concat(a?"bg-green-900/20 border-green-700":"bg-gray-800/20 border-gray-700"),children:[(0,t.jsxs)("h4",{className:"font-bold flex items-center gap-2",children:[r.name,a&&(0,t.jsx)("span",{className:"text-xs text-green-400",children:"✓ Purchased"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-300 my-2",children:r.description}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,t.jsxs)("span",{className:"font-mono text-sm",children:[n(r.cost)," RP"]}),!a&&(0,t.jsx)("span",{className:"text-xs ".concat(l?"text-green-400":"text-gray-400"),children:l?"Can purchase":"Need ".concat(n(o)," more")})]}),!a&&(0,t.jsx)("button",{onClick:()=>s(r.id,r.cost),disabled:!l,className:"w-full mt-3 py-2 rounded-md ".concat(l?"bg-blue-600 hover:bg-blue-700":"bg-gray-700 cursor-not-allowed"),children:"Purchase"})]},r.id)})})]},a)})})}function u(){let{state:e,setState:r}=(0,a.vU)(),s=s=>{let t=e.employees[s],a=t.cost*Math.pow(1.15,t.owned);e.cash.owned>=a&&r(e=>({...e,cash:{...e.cash,owned:e.cash.owned-a},employees:{...e.employees,[s]:{...e.employees[s],owned:e.employees[s].owned+1}}}))},l=r=>{let s=e.employees[r];if("interns"===r||"scientists"===r){let t="interns"===r?s.researchRate*e.upgrades.internEfficiency:s.researchRate;return s.owned*t}return"accountant"===r?s.owned*s.researchSellRate:0};return(0,t.jsxs)("div",{className:"bg-dark-default rounded-xl p-6 shadow-lg border border-slate-700",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-primary-light mb-6",children:"Employee Management"}),e.employees.accountant.owned>0&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-gray-800 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold",children:"Research Auto-Selling"}),(0,t.jsx)("p",{className:"text-sm text-gray-300",children:e.settings.sellResearch?"Selling ".concat((e.employees.accountant.owned*e.employees.accountant.researchSellRate).toFixed(2)," RP/s for cash"):"Auto-selling disabled"})]}),(0,t.jsx)("button",{onClick:()=>{r(e=>({...e,settings:{...e.settings,sellResearch:!e.settings.sellResearch}}))},className:"relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none ".concat(e.settings.sellResearch?"bg-blue-600":"bg-gray-600"),children:(0,t.jsx)("span",{className:"inline-block w-4 h-4 transform transition-transform rounded-full bg-white ".concat(e.settings.sellResearch?"translate-x-6":"translate-x-1")})})]})}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4",children:Object.keys(e.employees).map(r=>{let a=e.employees[r],o=a.cost*Math.pow(1.15,a.owned),c=e.cash.owned>=o,i=l(r);return(0,t.jsx)("div",{className:"p-4 rounded-lg border transition-colors ".concat(c?"border-blue-600 hover:border-blue-500":"border-gray-700"," bg-gray-900/50"),children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold capitalize",children:r}),(0,t.jsxs)("div",{className:"text-sm text-gray-300 mt-1",children:[(0,t.jsxs)("p",{children:["Owned: ",a.owned]}),i>0&&(0,t.jsx)("p",{children:"accountant"===r?"Selling ".concat((a.owned*a.researchSellRate).toFixed(2)," RP/s"):"Production: ".concat(i.toFixed(2)," RP/s")}),"accountant"===r&&(0,t.jsx)("p",{className:"text-yellow-400",children:"Converts research to cash"})]})]}),(0,t.jsxs)("button",{onClick:()=>s(r),disabled:!c,className:"px-4 py-2 rounded-md min-w-[100px] text-center ".concat(c?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"),children:["$",n(o)]})]})},r)})})]})}function m(){let{state:e,setState:r,saveGame:s,loadGame:n,resetGame:o,exportSave:c,importSave:i}=(0,a.vU)(),[d,u]=(0,l.useState)(""),{animations:m,notifications:h,soundEffects:g,tickerSpeed:x}=e.settings||{animations:!0,notifications:!0,soundEffects:!1,tickerSpeed:30},p=(e,t)=>{r(r=>({...r,settings:{...r.settings||{animations:!0,notifications:!0,soundEffects:!1,tickerSpeed:30},[e]:t}})),s()};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Options"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Save & Load"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)("button",{onClick:s,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors flex items-center justify-center gap-2",children:"\uD83D\uDCBE Save Game"}),(0,t.jsx)("button",{onClick:n,className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition-colors flex items-center justify-center gap-2",children:"⏮ Load Game"}),(0,t.jsx)("button",{onClick:()=>{confirm("你确定要重置游戏吗？")&&o()},className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors flex items-center justify-center gap-2",children:"\uD83D\uDD04 Reset Game"}),(0,t.jsx)("button",{onClick:()=>{let e=c();navigator.clipboard.writeText(e).then(()=>alert("存档已复制到剪贴板!")).catch(()=>{let r=new Blob([e],{type:"text/plain"}),s=URL.createObjectURL(r),t=document.createElement("a");t.href=s,t.download="universe-explorer-save.json",t.click(),URL.revokeObjectURL(s)})},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors flex items-center justify-center gap-2",children:"\uD83D\uDCE4 Export Save"})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Import Save Data"}),(0,t.jsx)("textarea",{value:d,onChange:e=>u(e.target.value),placeholder:"Paste save data here...",className:"w-full p-3 rounded-lg bg-gray-800 border border-gray-700 text-sm",rows:5}),(0,t.jsx)("button",{onClick:()=>{d.trim()&&confirm("这将覆盖你当前的游戏。继续吗?")&&(i(d)?(alert("游戏存档导入成功!"),u("")):alert("无效的存档数据"))},disabled:!d.trim(),className:"mt-2 px-4 py-2 rounded-lg transition-colors flex items-center justify-center gap-2 w-full ".concat(d.trim()?"bg-orange-600 hover:bg-orange-700":"bg-gray-700 cursor-not-allowed opacity-50"),children:"\uD83D\uDCE5 Import Save"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Settings"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("label",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-lg hover:bg-gray-800/70 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:m,onChange:e=>p("animations",e.target.checked),className:"rounded h-5 w-5 text-blue-600 focus:ring-blue-500 bg-gray-700 border-gray-600"}),(0,t.jsx)("span",{className:"flex-1",children:"Enable animations"})]}),(0,t.jsxs)("label",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-lg hover:bg-gray-800/70 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:h,onChange:e=>p("notifications",e.target.checked),className:"rounded h-5 w-5 text-blue-600 focus:ring-blue-500 bg-gray-700 border-gray-600"}),(0,t.jsx)("span",{className:"flex-1",children:"Show notifications"})]}),(0,t.jsxs)("label",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-lg hover:bg-gray-800/70 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:g,onChange:e=>p("soundEffects",e.target.checked),className:"rounded h-5 w-5 text-blue-600 focus:ring-blue-500 bg-gray-700 border-gray-600"}),(0,t.jsx)("span",{className:"flex-1",children:"Enable sound effects"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-lg",children:[(0,t.jsx)("span",{className:"flex-1",children:"Ticker Speed:"}),(0,t.jsxs)("select",{value:null!=x?x:30,onChange:e=>p("tickerSpeed",Number(e.target.value)),className:"bg-gray-800 text-sm p-1 rounded border border-gray-700",children:[(0,t.jsx)("option",{value:60,children:"Slow"}),(0,t.jsx)("option",{value:30,children:"Normal"}),(0,t.jsx)("option",{value:15,children:"Fast"})]})]})]})]})]})}function h(){let{state:e,setState:r}=(0,a.vU)(),s=(s,t)=>{e.cash.owned>=t&&r(e=>{let r=e.buildings[s].owned+1;return{...e,cash:{...e.cash,owned:e.cash.owned-t},buildings:{...e.buildings,[s]:{...e.buildings[s],owned:r}}}})},l=Object.keys(e.buildings);return(0,t.jsxs)("div",{className:"bg-dark-default rounded-xl p-6 shadow-lg border border-slate-700",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Buildings"}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4",children:l.map(r=>{let a=e.buildings[r],l="power"in a?a.power:0;return(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-gray-800/20 border border-gray-700",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-lg capitalize",children:r.replace(/([A-Z])/g," $1")}),(0,t.jsxs)("p",{className:"text-sm text-gray-300 my-1",children:["pumpJack"===r&&"Extracts oil from the ground","refinery"===r&&"Processes oil into usable products","energyStations"===r&&"Generates energy for your operations","commonOreMine"===r&&"Mine for common ores","commonOreRefinery"===r&&"Refine common ores into ingots"]}),(0,t.jsx)("ul",{className:"text-xs text-gray-400 list-disc list-inside",children:(0,t.jsxs)("li",{children:["Current production: ",l," per second"]})})]}),(0,t.jsx)("span",{className:"text-lg font-mono",children:a.owned})]}),(0,t.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm",children:["Next cost: ",n(a.cost)," cash"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:["Owned: ",a.owned]})]}),(0,t.jsx)("button",{onClick:()=>s(r,a.cost),disabled:e.cash.owned<a.cost,className:"px-4 py-2 rounded-lg ".concat(e.cash.owned>=a.cost?"bg-blue-600 hover:bg-blue-700":"bg-gray-700 cursor-not-allowed"),children:"Purchase"})]})]},r)})})]})}function g(){let{state:e,setState:r}=(0,a.vU)(),s=[{id:"petrol",name:"Petrol",buyPrice:15,sellPrice:10,owned:e.petrol.owned,description:"Fuel for your operations"}],l=(s,t)=>{e.cash.owned>=t&&r(e=>({...e,cash:{...e.cash,owned:e.cash.owned-t},petrol:{...e.petrol,owned:e.petrol.owned+1}}))},o=(s,t)=>{e.petrol.owned>0&&r(e=>({...e,cash:{...e.cash,owned:e.cash.owned+t},petrol:{...e.petrol,owned:e.petrol.owned-1}}))};return(0,t.jsxs)("div",{className:"bg-dark-default rounded-xl p-6 shadow-lg border border-slate-700",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Market"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(r=>(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-gray-800/20 border border-gray-700",children:[(0,t.jsx)("h3",{className:"font-bold text-lg",children:r.name}),(0,t.jsx)("p",{className:"text-sm text-gray-300 my-2",children:r.description}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("p",{children:["Owned: ",n(r.owned)]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,t.jsxs)("button",{onClick:()=>l(r.id,r.buyPrice),disabled:e.cash.owned<r.buyPrice,className:"py-2 rounded-lg ".concat(e.cash.owned>=r.buyPrice?"bg-green-600 hover:bg-green-700":"bg-gray-700 cursor-not-allowed"),children:["Buy (",n(r.buyPrice)," cash)"]}),(0,t.jsxs)("button",{onClick:()=>o(r.id,r.sellPrice),disabled:r.owned<=0,className:"py-2 rounded-lg ".concat(r.owned>0?"bg-blue-600 hover:bg-blue-700":"bg-gray-700 cursor-not-allowed"),children:["Sell (",n(r.sellPrice)," cash)"]})]})]})]},r.id))})]})}function x(){return(0,t.jsxs)("div",{className:"bg-dark-default rounded-xl p-6 shadow-lg border border-slate-700",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Production Overview"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Production Chains"})})]})}function p(){var e;let{state:r}=(0,a.vU)(),[s,o]=(0,l.useState)(!1),c=(null===(e=r.settings)||void 0===e?void 0:e.tickerSpeed)||30;(0,l.useEffect)(()=>{o(!0)},[]);let{cash:{owned:i,perSec:d},research:{owned:u,perSec:m},energy:{current:h},buildings:{energyStations:{owned:g=0}={},pumpJack:{owned:x=0}={},commonOreMine:{owned:p=0}={},commonOreRefinery:{owned:b=0}={}}={},resources:{oil:f=0,commonOre:v=0,commonIngot:w=0}={},petrol:{owned:y=0,perSec:j=0}={}}=r,N=(0,l.useRef)(null),[k,S]=(0,l.useState)({container:0,content:0}),E=(0,l.useRef)(0),[,R]=(0,l.useState)(0),C=(0,l.useRef)(null),[O,P]=(0,l.useState)({}),I=(0,l.useMemo)(()=>[{id:"cash",name:"\uD83D\uDCB0 Cash",value:i,change:d},{id:"research",name:"\uD83D\uDD2C Research",value:u,change:m},{id:"energy",name:"⚡ Energy",value:h,change:.1*g},{id:"oil",name:"\uD83D\uDEE2️ Oil",value:f,change:.25*x},{id:"petrol",name:"⛽ Petrol",value:y,change:j},{id:"commonOre",name:"\uD83E\uDEA8 Common Ore",value:v,change:.25*p},{id:"commonIngot",name:"\uD83D\uDEAA Common Ingot",value:w,change:.25*b}],[i,d,u,m,h,g,f,x,y,j,w,v,p,b]),D=(0,l.useCallback)((e,r)=>O[e]?r>O[e]?1:r<O[e]?-1:0:0,[O]);return((0,l.useEffect)(()=>{let e=()=>{N.current&&S({container:N.current.offsetWidth,content:I.reduce((e,r,s)=>e+200+20*(s<I.length-1),0)})};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),C.current&&(cancelAnimationFrame(C.current),C.current=null)}},[I,s]),(0,l.useEffect)(()=>{if(!s||k.content<=0)return;let e=100-c/60*90,r=null,t=s=>{r||(r=s);let a=(s-r)/1e3;r=s,E.current-=e*a,E.current<-k.content&&(E.current=k.container),R(e=>e+1),C.current=requestAnimationFrame(t)};return C.current=requestAnimationFrame(t),()=>{C.current&&(cancelAnimationFrame(C.current),C.current=null)}},[k,s,c]),(0,l.useEffect)(()=>{if(!s)return;P(I.reduce((e,r)=>(e[r.id]=r.value,e),{}));let e=setInterval(()=>{P(e=>({...e,...I.reduce((e,r)=>(e[r.id]=r.value,e),{})}))},5e3);return()=>clearInterval(e)},[I,s]),s)?(0,t.jsx)("div",{ref:N,className:"fixed bottom-0 left-0 right-0 bg-gray-900/90 border-t border-gray-700 h-10 z-50 overflow-hidden",children:(0,t.jsx)("div",{className:"flex items-center h-full whitespace-nowrap absolute",style:{left:"".concat(E.current,"px")},children:I.map((e,r)=>{let s=D(e.id,e.value);return(0,t.jsxs)("div",{className:"flex items-center mx-4 text-sm",children:[(0,t.jsxs)("span",{className:"font-bold",children:[e.name,":"]}),(0,t.jsx)("span",{className:"mx-1",children:n(e.value)}),(0,t.jsx)("span",{className:"text-xs ".concat(1===s?"text-green-400":-1===s?"text-red-400":"text-yellow-400"," mx-1"),children:1===s?"↑":-1===s?"↓":"→"}),(0,t.jsxs)("span",{className:"text-xs ".concat(e.change>=0?"text-green-400":"text-red-400"),children:["(",e.change>=0?"+":"",e.change.toFixed(1),"/s)"]}),r<I.length-1&&(0,t.jsx)("span",{className:"mx-2 text-gray-500",children:"•"})]},e.id)})})}):(0,t.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-900/90 border-t border-gray-700 h-10 z-50 overflow-hidden",ref:N})}function b(){let[e,r]=(0,l.useState)("main");return(0,t.jsxs)("div",{className:"container mx-auto p-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Universe Explorer"}),(0,t.jsx)("div",{className:"flex border-b border-slate-700 mb-6 overflow-x-auto",children:[{id:"main",label:"Main"},{id:"buildings",label:"Buildings"},{id:"market",label:"Market"},{id:"employees",label:"Employees"},{id:"upgrades",label:"Upgrades"},{id:"prestige",label:"Prestige"},{id:"options",label:"Options"}].map(s=>(0,t.jsx)("button",{onClick:()=>r(s.id),className:"px-4 py-2 font-medium text-sm whitespace-nowrap transition-colors duration-200 ".concat(e===s.id?"text-primary-light border-b-2 border-primary-light":"text-slate-400 hover:text-slate-300"),children:s.label},s.id))}),(0,t.jsxs)("div",{className:"transition-opacity duration-200",children:["main"===e&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)(c,{}),(0,t.jsx)(o,{})]}),"buildings"===e&&(0,t.jsx)("div",{className:"bg-dark-default rounded-xl p-6 shadow-lg border border-slate-700",children:(0,t.jsx)(h,{})}),"production"===e&&(0,t.jsx)("div",{className:"bg-dark-default rounded-xl p-6 shadow-lg border border-slate-700",children:(0,t.jsx)(x,{})}),"market"===e&&(0,t.jsx)("div",{className:"bg-dark-default rounded-xl p-6 shadow-lg border border-slate-700",children:(0,t.jsx)(g,{})}),"employees"===e&&(0,t.jsx)("div",{className:"bg-dark-default rounded-xl p-6 shadow-lg border border-slate-700",children:(0,t.jsx)(u,{})}),"upgrades"===e&&(0,t.jsx)("div",{className:"bg-dark-default rounded-xl p-6 shadow-lg border border-slate-700",children:(0,t.jsx)(d,{})}),"prestige"===e&&(0,t.jsx)("div",{className:"bg-dark-default rounded-xl p-6 shadow-lg border border-slate-700",children:(0,t.jsx)(i,{})}),"options"===e&&(0,t.jsx)("div",{className:"bg-dark-default rounded-xl p-6 shadow-lg border border-slate-700",children:(0,t.jsx)(m,{})})]}),(0,t.jsx)(p,{})]})}},8972:(e,r,s)=>{Promise.resolve().then(s.bind(s,4289))}},e=>{var r=r=>e(e.s=r);e.O(0,[441,684,358],()=>r(8972)),_N_E=e.O()}]);