(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},491:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,347,23)),Promise.resolve().then(t.bind(t,1024))},1024:(e,r,t)=>{"use strict";t.d(r,{GameStateProvider:()=>v,EX:()=>m,BG:()=>u,vU:()=>g});var n=t(5155),o=t(2115);function s(e){var r;let t={...u};return(null==e?void 0:e.state)&&"object"==typeof(r=e.state)&&null!==r&&(t=function e(r,t){let n={...r};for(let o in t)if(t.hasOwnProperty(o)){let s=r[o],i=t[o];"object"!=typeof s||null===s||"object"!=typeof i||null===i||Array.isArray(s)||Array.isArray(i)?void 0!==i&&(n[o]=i):n[o]=e(s,i)}return n}(u,e.state)),(null==e?void 0:e.version)==="1.1"&&(t={...t,employees:{...t.employees,interns:{...t.employees.interns,cost:1},scientists:{...t.employees.scientists,cost:10}}}),(null==e?void 0:e.version)&&"1.1"!==e.version&&"1.2"!==e.version||(t={...t,employees:{...t.employees,accountant:t.employees.accountant||{owned:0,cost:10,researchSellRate:.1}},settings:{...t.settings,sellResearch:t.settings.sellResearch||!1}}),t}let i=e=>{try{let r={state:e,timestamp:Date.now(),version:"1.3"};return localStorage.setItem("universeExplorerSave",JSON.stringify(r)),!0}catch(e){return console.error("Failed to save game:",e),!1}},a=()=>{try{let e=localStorage.getItem("universeExplorerSave");if(!e)return null;let r=JSON.parse(e);return s(r)}catch(e){return console.error("Failed to load game:",e),null}},l=()=>(localStorage.removeItem("universeExplorerSave"),u),c=e=>JSON.stringify({state:e,timestamp:Date.now(),version:"1.3"},null,2),d=e=>{try{let r=JSON.parse(e);return s(r)}catch(e){return console.error("Failed to import save:",e),null}},u={research:{owned:0,perClick:1,perSec:0,totalGenerated:0},cash:{owned:0,perClick:1,perSec:0,cost:10},petrol:{owned:0,perSec:0,cost:10},energy:{current:100,max:100,regenRate:1},buildings:{pumpJack:{owned:0,cost:1e3,power:.25,generates:"oil"},refinery:{owned:0,cost:1e3,power:.5,generates:"petrol"},energyStations:{owned:0,cost:500,generates:"energy"},commonOreMine:{owned:0,cost:1e3,generates:"commonOre",power:.25},commonOreRefinery:{owned:0,cost:1e3,generates:"commonIngot",power:.25}},employees:{interns:{owned:0,cost:1,researchRate:.1},scientists:{owned:0,cost:10,researchRate:1},accountant:{owned:0,cost:10,researchSellRate:.1}},exploration:{localAreas:0,satellites:0,probes:0,discoveries:[]},resources:{commonOre:0,commonIngot:0,metals:0,chemicals:0,electronics:0,oil:0},market:{mineralPrice:10,metalPrice:25,chemicalPrice:15,electronicsPrice:50,lastUpdate:0},upgrades:{purchased:[],internEfficiency:1},prestige:{knowledge:0,upgrades:[],totalKnowledge:0,knowledgeInRun:0},stats:{playTime:0,researchClicks:0,lastSave:null},settings:{tickerSpeed:30,animations:!0,notifications:!0,soundEffects:!1,sellResearch:!1}},m={research:[{id:"efficient_interns",name:"Efficient Interns",description:"Interns generate +50% more research",cost:1500,effect:e=>({research:{...e.research},upgrades:{...e.upgrades,internEfficiency:1.5}})},{id:"lab_tools",name:"Lab tools",description:"Tools generate +50% more research",cost:1500,effect:e=>({research:{...e.research,perClick:e.research.perClick+.1},upgrades:{...e.upgrades,internEfficiency:e.upgrades.internEfficiency+.1}})}]},p=(0,o.createContext)(null);function v(e){let{children:r}=e,[t,s]=(0,o.useState)(()=>a()||u);return(0,o.useEffect)(()=>{let e=setInterval(()=>{s(e=>{var r,t,n,o,s,a,l,c,d;let u=e.employees.interns.owned*e.employees.interns.researchRate*e.upgrades.internEfficiency,m=e.employees.scientists.owned*e.employees.scientists.researchRate,p=((null===(r=e.buildings.pumpJack)||void 0===r?void 0:r.owned)||0)*((null===(t=e.buildings.pumpJack)||void 0===t?void 0:t.power)||.25),v=((null===(n=e.buildings.refinery)||void 0===n?void 0:n.owned)||0)*((null===(o=e.buildings.refinery)||void 0===o?void 0:o.power)||.5),g=(null===(s=e.buildings.energyStations)||void 0===s?void 0:s.owned)||0,w=((null===(a=e.buildings.commonOreMine)||void 0===a?void 0:a.owned)||0)*((null===(l=e.buildings.commonOreMine)||void 0===l?void 0:l.power)||.25),f=((null===(c=e.buildings.commonOreRefinery)||void 0===c?void 0:c.owned)||0)*((null===(d=e.buildings.commonOreRefinery)||void 0===d?void 0:d.power)||.25),h=0,y=0;e.settings.sellResearch&&(y=Math.min(e.employees.accountant.owned,e.research.owned),h=.1*e.employees.accountant.owned);let S={...e,research:{...e.research,owned:e.research.owned+u+m-y,perSec:u+m-y,totalGenerated:e.research.totalGenerated+u+m},cash:{...e.cash,owned:e.cash.owned+h,perSec:h},petrol:{...e.petrol,owned:(e.petrol.owned||0)+v,perSec:v},resources:{...e.resources,oil:(e.resources.oil||0)+p,chemicals:e.resources.chemicals||0,commonOre:(e.resources.commonOre||0)+w,commonIngot:(e.resources.commonIngot||0)+f},energy:{current:Math.min(e.energy.max||100,(e.energy.current||0)+g+(e.energy.regenRate||1)),max:e.energy.max||100,regenRate:e.energy.regenRate||1},stats:{...e.stats,playTime:(e.stats.playTime||0)+1,lastSave:new Date().toISOString()}};return(e.stats.playTime||0)%10==0&&i(S),S})},1e3);return()=>clearInterval(e)},[]),(0,o.useEffect)(()=>{let e=setInterval(()=>{s(e=>({...e,tickerUpdate:Date.now()}))},1e3);return()=>clearInterval(e)},[]),(0,o.useEffect)(()=>{let e=()=>{"hidden"===document.visibilityState&&i(t)},r=()=>{i(t)};return document.addEventListener("visibilitychange",e),window.addEventListener("pagehide",r),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("pagehide",r)}},[t]),(0,o.useEffect)(()=>{let e=setInterval(()=>{i(t)},3e4);return()=>clearInterval(e)},[t]),(0,o.useEffect)(()=>{let e=()=>{i(t)};return window.addEventListener("beforeunload",e),window.addEventListener("unload",()=>i(t)),()=>{window.removeEventListener("beforeunload",e),window.removeEventListener("unload",()=>i(t))}},[t]),(0,n.jsx)(p.Provider,{value:{state:t,setState:s,saveGame:()=>i(t),loadGame:()=>{let e=a();return e&&s(e),e},resetGame:()=>s(l()),exportSave:()=>c(t),importSave:e=>{let r=d(e);return r&&s(r),r}},children:(0,n.jsx)("div",{className:"GameStateProvider min-h-full",children:r})})}function g(){let e=(0,o.useContext)(p);if(!e)throw Error("useGameState must be used within a GameStateProvider");return e}}},e=>{var r=r=>e(e.s=r);e.O(0,[690,441,684,358],()=>r(491)),_N_E=e.O()}]);